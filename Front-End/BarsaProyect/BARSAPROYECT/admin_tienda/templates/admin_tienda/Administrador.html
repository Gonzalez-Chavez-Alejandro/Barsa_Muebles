{% load static %}
<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Panel Administrativo</title>
  <!-- ----------------------------------------------- -->
  <!-- Link Css -->
  <!-- ----------------------------------------------- -->
  <link rel="icon" href="https://res.cloudinary.com/dacrpsl5p/image/upload/v1745430696/Logo-Negro-B_c6wznv.png"
    type="image/x-icon">
  <link rel="stylesheet" href="{% static 'Css/Principal.css' %}">
  <link rel="stylesheet" href="https://cdn.datatables.net/1.13.4/css/jquery.dataTables.min.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <link rel="stylesheet" href="{% static 'Css/Administrador.css' %}">
  <link rel="stylesheet" href="{% static 'Css/Admin-Lista-Usuarios.css' %}">
  <link rel="stylesheet" href="{% static 'Css/categoria.css' %}">
  <link rel="stylesheet" href="{% static 'Css/Admin-Producto.css' %}">
  <link rel="stylesheet" href="{% static 'Css/Admin-Producto-Imagen.css' %}">
  <link rel="stylesheet" href="{% static 'Css/Modal-Agregar-Producto.css' %}">
  <link rel="stylesheet" href="{% static 'Css/Admin-Cards.css' %}">
  <link rel="stylesheet" href="{% static 'Css/Home.css' %}">

  <link rel="stylesheet" href="{% static 'Css/Admin-usuarios-mandas.css' %}">

  <!-- Incluir jsPDF -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

</head>

<body>
  <!-- ----------------------------------------------- -->
  <!-- Botón de menú para móvill -->
  <!-- ----------------------------------------------- -->
  <button id="botonMenu" class="boton-menu">
    <i class="fas fa-bars"></i>
  </button>


  <!-- ----------------------------------------------- -->
  <!-- Menú lateral -->
  <!-- ----------------------------------------------- -->
  <div id="menuLateral" class="menu-lateral">
    <button id="cerrarMenu" class="cerrar-menu">
      <i class="fas fa-times"></i>
    </button>
    <ul class="menu">
      <li class="menu-item">
        <a href="#" class="menu-button" onclick="mostrarInicio()">
          <i class="fas fa-home"></i><span>Home</span>
        </a>
      </li>
      <li class="menu-item">
        <button class="menu-button" onclick="toggleSubmenu(this)">
          <i class="fas fa-user"></i><span>Usuarios</span>
        </button>
        <ul class="submenu">
          <li class="submenu-item"><a href="#" onclick="mostrarSeccion('usuarios')">Lista de usuarios</a></li>
        </ul>
        <ul class="submenu">
          <li class="submenu-item"><a href="#" onclick="mostrarSeccion('usuarios-star-comment')">Comentarios Stars </a>
          </li>
        </ul>
        <ul class="submenu">
          <li class="submenu-item"><a href="#" onclick="mostrarSeccion('usuarios-mandas')">Mandas</a>
          </li>
        </ul>
      </li>
      <li class="menu-item">
        <button class="menu-button" onclick="toggleSubmenu(this)">
          <i class="fas fa-image"></i><span> Imágenes</span>
        </button>
        <ul class="submenu">
          <li class="submenu-item"><a href="#" onclick="mostrarSeccion('imagenes')">Lista Imagenes</a></li>
        </ul>
      </li>
      <li class="menu-item">
        <button class="menu-button" onclick="toggleSubmenu(this)">
          <i class="fas fa-tags"></i><span>Categorías</span>
        </button>
        <ul class="submenu">
          <li class="submenu-item"><a href="#" onclick="mostrarSeccion('categorias')">Lista de categorías</a></li>
        </ul>
      </li>
      <li class="menu-item">
        <button class="menu-button" onclick="toggleSubmenu(this)">
          <i class="fas fa-box"></i><span>Productos</span>
        </button>
        <ul class="submenu">
          <li class="submenu-item"><a href="#" onclick="mostrarSeccion('productos-lleno')"><i class="fas fa-box"> </i>
              Todos </a></li>
        </ul>
        <ul class="submenu" id="submenu-categorias">
          <!-- Aquí se insertarán las categorías -->
        </ul>
      </li>
      <li class="menu-item">
        <button class="menu-button" onclick="toggleSubmenu(this)">
          <i class="fas fa-list-alt"></i><span>Catalogo</span>
        </button>
        <ul class="submenu">
          <li class="submenu-item"><a href="#" onclick="mostrarSeccion('catalogo')">Catalogo</a></li>
        </ul>
      </li>
      <li class="menu-item">
        <button class="menu-button" onclick="toggleSubmenu(this)">
          <i class="fas fa-id-card"></i><span>Contactos</span>
        </button>
        <ul class="submenu">
          <li class="submenu-item"><a href="#" onclick="mostrarSeccion('contactos')">Contactos</a></li>
        </ul>
      </li>

      <li class="menu-item">
        <button class="menu-button"><i class="fas fa-sign-out-alt"></i><span>Cerrar sesión</span></button>
      </li>
    </ul>

  </div>

  <!-- Contenido principal -->
  <main class="contenido" id="contenidoPrincipal">
    <!-- Sección de inicio -->
    <section id="inicio" class="seccion activa">
      <h1 class="h1-Panel-Administrativo">Panel Administrativo</h1>
      <p class="descripcion-opcion">Selecciona una opción.</p>


      <div class="contenedor-cards">
        <!-- Tarjeta de Usuarios -->
        <div class="card-usuario">
          <div class="icono-top">
            <i class="fas fa-user-circle"></i>
          </div>
          <h3>Gestión de Usuarios</h3>
          <p>Administra los usuarios del sistema: agrega, edita o elimina fácilmente.</p>
          <button class="card-btn" onclick="mostrarSeccion('usuarios')">
            <i class="fas fa-users-cog"></i> Ver Usuarios
          </button>
        </div>

        <!-- Tarjeta de Categorías -->
        <div class="card-categoria">
          <i class="fas fa-tags icono-top"></i>
          <h3>Categorías</h3>
          <p>Administra las categorías de tus productos fácilmente.</p>
          <button class="card-btn" onclick="mostrarSeccion('categorias')">
            <i class="fas fa-eye"></i> Ir a Categorías
          </button>
        </div>

        <!-- Tarjeta de Productos -->
        <div class="card-producto">
          <i class="fas fa-box-open icono-top"></i>
          <h3>Productos</h3>
          <p>Administra los productos disponibles en tu catálogo: crea, edita y elimina fácilmente.</p>
          <button class="card-btn" onclick="mostrarSeccion('productos-lleno')">
            <i class="fas fa-box"></i> Productos
          </button>
        </div>


        <!-- Tarjeta de Comentarios y Estrellas -->
        <div class="card-comentario">
          <i class="fas fa-star icono-top"></i>
          <h3>Comentarios y Valoraciones</h3>
          <p>Visualiza y administra comentarios y estrellas que los usuarios dejan sobre los productos.</p>

          </button>
          <button class="card-btn" onclick="mostrarSeccion('usuarios-star-comment')">
            <i class="fas fa-comments"></i> Ver Opiniones
          </button>
        </div>

        <!-- Tarjeta de Contacto -->
        <div class="card-comentario">
          <i class="fas fa-address-book icono-top"></i>
          <h3>Contacto</h3>
          <p>Administra teléfonos, ubicaciones y redes sociales mostradas en la sección de contacto.</p>

          <button class="card-btn" onclick="mostrarSeccion('contactos')">
            <i class="fas fa-edit"></i> Editar Contacto
          </button>
        </div>

      </div>






      <!-- Flecha derecha -->

      </div>
      <div id="contenedor-productos" class="contenedor-productos"></div>


      <div class="admin-footer-editor">
        <h2>Editor del Footer</h2>

        <div class="admin-section">
          <h3>Información de Contacto</h3>
          <div class="form-group">
            <label>Correo electrónico:</label>
            <input type="email" id="admin-email" class="form-control" placeholder="ejemplo@empresa.com">
          </div>
          <div class="form-group">
            <label>Teléfonos (separados por comas):</label>
            <input type="text" id="admin-phones" class="form-control" placeholder="123-456-7890, 987-654-3210">
          </div>
        </div>

        <div class="admin-section">
          <h3>Ubicaciones</h3>
          <div id="admin-locations-container">
            <!-- Las ubicaciones se generarán dinámicamente -->
          </div>
          <button id="add-location-btn" class="btn-add">+ Añadir ubicación</button>
        </div>

        <div class="admin-section">
          <h3>Redes Sociales</h3>
          <div id="admin-social-container">
            <!-- Las redes sociales se generarán dinámicamente -->
          </div>
          <button id="add-social-btn" class="btn-add">+ Añadir red social</button>
        </div>

        <div class="admin-actions">
          <button id="preview-footer-btn" class="btn-preview">Vista Previa</button>


          <button id="save-footer-btn" class="btn-save">Guardar Cambios</button>
        </div>
      </div>



    </section>






    <section id="catalogo" class="seccion">
      <!-- Panel de administración -->
      <div class="admin-panel" id="adminPanel">
        <h3>Administrar Catálogo</h3>
        <div class="admin-form">
          <input type="text" id="nuevoEnlace" class="admin-input"
            placeholder="Ej: https://drive.google.com/file/d/TU_ID/preview">
          <div class="button-group">
            <button class="admin-btn" onclick="actualizarPDF()">Actualizar</button>
            <button class="delete-btn-limpiar-campo" onclick="limpiarCampo()">Eliminar</button>
          </div>
        </div>
        <small class="text-muted">
          Formato requerido: <code>https://drive.google.com/file/d/[ID_ARCHIVO]/preview</code>
        </small>
      </div>

    </section>


    <!-- ----------------------------------------------- -->
    <!-- Sección de Usuarios -->
    <!-- ----------------------------------------------- -->

    <section id="usuarios" class="seccion">
      <div class="admin-panel">
        <h2>Lista de Usuarios Registrados</h2>

        <button class="btn-agregar" onclick="abrirModalAgregar()">
          <i class="fas fa-plus"></i> Agregar
        </button>


        <div class="filtros">
          <div class="search-container">
            <i class="fas fa-search search-icon"></i>
            <input type="text" id="buscador" placeholder="Buscar por ID, nombre, correo o teléfono..."
              onkeyup="buscarUsuarios()">
          </div>
        </div>




        <div class="table-container">
          <table class="admin-table">
            <thead>
              <tr>
                <th scope="col">ID</th>
                <th scope="col">Nombre</th>
                <th scope="col">Correo</th>
                <th>Teléfono</th>
                <th>Contraseña</th>
                <th>Acciones</th>
              </tr>
            </thead>
            <tbody>
              <!-- Aquí se insertan usuarioss con JS -->
            </tbody>
          </table>
        </div>
        <div class="paginacion">
          <button id="paginaAnterior" onclick="cambiarPagina(-1)">Anterior</button>
          <span id="paginaActual">Página 1 de</span>
          <span id="totalPaginas">2</span>
          <button id="paginaSiguiente" onclick="cambiarPagina(1)">Siguiente</button>
        </div>
      </div>
    </section>


    <section id="usuarios-star-comment" class="seccion">
      <div class="admin-panel">
        <h2>Comentarios y Calificaciones</h2>

        <!-- Buscador -->
        <input type="text" placeholder="Buscar usuario o producto..." class="bscdr-usuarios-star-comment"
          id="buscador-comentarios" />
        <div class="table-container">
          <table class="admin-table">
            <thead>
              <tr>
                <th>Id</th>
                <th>Nombre-Usuario</th>
                <th>Nombre-Producto</th>
                <th>Comentarios</th>
                <th>Stars</th>
                <th class="td-espacio">Acciones</th>
              </tr>
            </thead>
            <tbody id="tabla-usuarios-comentarios"></tbody>
          </table>
        </div>
      </div>
    </section>










    <section id="usuarios-mandas" class="seccion">

      <!-- Buscador -->
      <div class="um-buscador-container">
        <div class="um-buscador">
          <i class="fas fa-search um-icono-buscar"></i>
          <input type="text" id="um-input-buscar" class="um-input-buscar"
            placeholder="Buscar por ID, nombre, correo o teléfono..." aria-label="Buscar pedidos">
        </div>
      </div>
      <h1>Pedidos Encargados</h1>
      <div class="um-header-actions">
        <button class="um-btn-pdf" id="um-exportar-todos">
          <i class="fas fa-file-pdf"></i> Exportar todos
        </button>
      </div>
      <div id="pedidos-container"></div>
    </section>











    <section id="categorias" class="seccion">
      <div class="admin-panel">
        <h2>Lista de Categorías</h2>

        <button class="categoria-btn-agregar" onclick="abrirModalAgregarCategoria()">
          <i class="fas fa-plus"></i> Agregar
        </button>

        <div class="table-container">
          <table class="admin-table">
            <thead>
              <tr>
                <th>id</th>
                <th>Nombre de Categoría</th>
                <th>Descripción</th>
                <th>Imagen</th>
                <th class="td-espacio">Acciones</th>
              </tr>
            </thead>
            <tbody id="tablaCategorias">
              <!-- ----------------------------------------------- -->
              <!-- Las categorías se insertan con JS -->
              <!-- ----------------------------------------------- -->
            </tbody>
          </table>
        </div>
        <div class="paginacion">
          <button onclick="cambiarPaginaCategoria(-1)">Anterior</button>
          <span id="paginaActualCategoria">Página 1</span>
          <span id="totalPaginasCategoria">1</span>
          <button onclick="cambiarPaginaCategoria(1)">Siguiente</button>
        </div>
      </div>
    </section>

    <!-- ----------------------------------------------- -->
    <!-- Sección de Productos -->
    <!-- ----------------------------------------------- -->

    <section id="productos" class="seccion">
      <div class="admin-panel">
        <h2 id="categoria-titulo">Selecciona una categoría</h2>
        <div id="formulario-producto" class="seccion">
          <form id="agregar-producto-form">
            <input type="hidden" id="categoria-id">
            <button class="btn-agregar" type="button" onclick="abrirModalAgregarProductos('regular')">
              <i class="fas fa-plus"></i> Agregar
            </button>
            <div class="filtros">
              <input type="text" id="buscadorProducto" placeholder="Buscar producto..." onkeyup="buscarProductos()">

            </div>
          </form>

          <div id="tablaContainer" class="scroll-container">
            <table class="admin-table">
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Nombre</th>
                  <th>Descripción</th>
                  <th>Precio</th>
                  <th>
                    <select id="filtroOferta" onchange="filtrarPorOferta()">
                      <option value="todos">Ofertas</option>
                      <option value="oferta">Con</option>
                      <option value="sinOferta">Sin</option>
                    </select>
                  </th>
                  <th>Precio Oferta</th>
                  <th>Carpetas</th>
                  <th>Nombre Imagenes</th>
                  <th> Acciones </th>
                </tr>
              </thead>
              <tbody id="tablaProductos">
                <!-- ----------------------------------------------- -->
                <!-- Las categorías se insertan con JS -->
                <!-- ----------------------------------------------- -->
              </tbody>
            </table>


          </div>
        </div>
      </div>
    </section>


    <section id="productos-lleno" class="seccion">
      <div class="admin-panel">

        <div id="formulario-producto-lleno">

          <div class="admin-card">
            <form id="form-destacados">

              <h2 id="titulo-destacados">📌 Productos </h2>

              <!-- Buscar y Agregar -->
              <div class="conjuntoagregarbuscar">
                <div class="filtros">
                  <div class="input-group" id="searchGroup">
                    <i class="fas fa-search search-icon" id="toggleSearch"></i>
                    <input type="text" id="buscadorProductoDestacados" placeholder="Buscar producto..."
                      onkeyup="buscarProductosDestacados()">
                  </div>
                </div>

                <button class="btn-agregar" type="button" onclick="abrirModalAgregarProductos('destacado')">
                  <i class="fas fa-plus"></i> Agregar
                </button>
              </div>

              <!-- Mostrar y Filtrar -->
              <div class="select-group-container">
                <div class="select-group-producto-lleno">
                  <label for="selectorCantidadProductos" class="select-label">
                    <i class="fas fa-th-list"></i> Mostrar:
                  </label>
                  <select id="selectorCantidadProductos" onchange="cambiarCantidadProductos()" class="select">
                    <option value="5">5</option>
                    <option value="10">10</option>
                    <option value="15">15</option>
                    <option value="25">25</option>
                    <option value="50">50</option>
                    <option value="100">100</option>
                  </select>
                </div>

                <div class="select-group-filtro-lleno">
                  <label for="filtroCategoria" class="select-label">
                    <i class="fas fa-filter"></i> Filtrar por categoría:
                  </label>
                  <div class="select-wrapper">
                    <select id="filtroCategoria" onchange="filtrarPorCategoria()" class="select">
                      <option value="">Seleccionar Categoría</option>
                    </select>
                  </div>
                </div>
              </div>

            </form>
          </div>



          <div id="tablaContainerDestacados" class="scroll-container">
            <table class="admin-table">
              <thead>
                <tr>
                  <th>ID</th>
                  <th class="NombretablaContainerDestacados">Nombre
                    <a href="javascript:void(0);" onclick="ordenarPorNombre()">AZ/ZA</a>
                  </th>
                  <th class="descripcion-table-productos">Descripción</th>
                  <th>Precio</th>
                  <th>Oferta</th>
                  <th>Precio Oferta</th>
                  <th>Carpetas</th>
                  <th>Nombre Imagenes</th>
                  <th class="td-espacio">Acciones</th>
                </tr>
              </thead>
              <tbody id="tablaProductosDestacados">
                <!-- Se insertan productos con JS -->
              </tbody>
            </table>
            <div class="paginacion">
              <button onclick="cambiarPaginaProductosLleno(-1)">Anterior</button>
              <span id="paginaActualProductosLleno">Página 1</span> de <span id="totalPaginasProductosLleno">de 0</span>
              <button onclick="cambiarPaginaProductosLleno(1)">Siguiente</button>
            </div>
          </div>
        </div>

      </div>


    </section>



    <!-- ----------------------------------------------- -->
    <!-- Sección de imagen -->
    <!-- ----------------------------------------------- -->

    <section id="imagenes" class="seccion">
      <div class="admin-panel">

        <nav class="menu-imagenes">
          <a id="linkSubir-img" class="menu-link-imagen active">Subir Imagen</a>
          <a id="linkOtro-img" class="menu-link-imagen">Otro Menú</a>
        </nav>
        <!-- Sección de Subir Imagen -->
        <section id="subir" class="seccion active">
          <h1>Subir Imagen</h1>

          <input type="file" id="fileInput">
          <button id="uploadButton">Subir Imagen</button>

          <div id="preview" class="preview">
            <!-- Loader o imagen aparecerán aquí -->
          </div>

          <h2>Enlace de la Imagen</h2>
          <textarea id="imageUrl" rows="4" cols="50" readonly
            placeholder="Aquí aparecerá el enlace de la imagen..."></textarea>
        </section>

        <!-- Otra sección -->
        <section id="otro" class="seccion">
          <h1>Otro Menú</h1>
          <p>Este es otro menú que puedes usar para agregar más contenido en el futuro.</p>
        </section>


      </div>
      </div>
    </section>





    <section id="contactos" class="seccion">
      <div class="admin-panel">
        <h2>Administración de Contacto</h2>
        <div class="acciones-contacto">
          <p id="mensaje-actualizado" class="mensaje-oculto">
            <i class="fas fa-check-circle"></i> Teléfono, ubicación y redes actualizados.
          </p>

          <p id="mensaje-eliminado-telefono" class="mensaje-oculto">
            <i class="fas fa-check-circle"></i> Teléfono ha sido borrado.
          </p>
          <p id="mensaje-error" class="mensaje-oculto error-mensaje">
            <i class="fas fa-exclamation-circle"></i> Ocurrió un error al eliminar el teléfono.
          </p>
          <p id="mensaje-eliminado-ubicacion" class="mensaje-oculto">
            <i class="fas fa-check-circle"></i> Ubicación ha sido borrada.
          </p>
        </div>

        <form id="admin-form">
          <!-- Teléfonos -->
          <div class="telefono-contactos">
            <h3 onclick="toggleSeccion(this)">
              Teléfonos <i class="fas fa-chevron-down"></i>
            </h3>
            <div class="contenido-seccion">
              <div id="lista-telefonos-admin"></div>
              <div class="right-button">
                <button class="Agregar-telefono" type="button" onclick="agregarTelefono()">
                  <i class="fas fa-plus" style="margin-left: 5px;"></i>
                  Agregar</button>
                <!-- <button id="mostrar-error">Mostrar mensaje de error</button>-->

              </div>
            </div>
          </div>

          <!-- Ubicaciones -->
          <div class="ubicaciones-contactos">
            <h3 onclick="toggleSeccion(this)">
              Ubicaciones <i class="fas fa-chevron-down"></i>
            </h3>
            <div class="contenido-seccion">
              <div id="lista-ubicaciones-admin"></div>
              <div class="right-button">
                <button type="button" class="Agregar-ubicacion" onclick="agregarUbicacion()">
                  <i class="fas fa-plus" style="margin-left: 5px;"></i>
                  Agregar </button>
              </div>
            </div>
          </div>

          <!-- Redes Sociales -->
          <div class="redes-contactos">
            <h3 onclick="toggleSeccion(this)">
              Redes Sociales <i class="fas fa-chevron-down"></i>
            </h3>
            <div class="contenido-seccion">
              <div class="red">
                <label class="social-label">
                  <!-- Checkbox escondido -->
                  <input type="checkbox" id="check-facebook" class="hidden-checkbox">
                  <!-- Contenedor circular para el ícono -->
                  <span class="social-circle">
                    <i class="fab fa-facebook-f social-icon facebook"></i>
                  </span>
                  <!-- Texto "Facebook" -->
                  <span class="social-text">Facebook</span>
                </label>
                <input type="url" id="input-facebook" placeholder="https://facebook.com/tuPagina">
              </div>

              <div class="red">
                <label>
                  <input type="checkbox" id="check-instagram">
                  <i class="fab fa-instagram social-icon instagram"></i>
                  Instagram
                </label>
                <input type="url" id="input-instagram" placeholder="https://instagram.com/tuPagina">
              </div>

              <div class="red">
                <label>
                  <input type="checkbox" id="check-whatsapp">
                  <i class="fab fa-whatsapp social-icon whatsapp"></i>
                  WhatsApp
                </label>
                <input type="url" id="input-whatsapp" placeholder="https://wa.me/5215551234567">
              </div>

              <div class="red">
                <label>
                  <input type="checkbox" id="check-gmail">
                  <i class="far fa-envelope social-icon gmail"></i>
                  Gmail
                </label>
                <input type="email" id="input-gmail" placeholder="correo@gmail.com">
              </div>


            </div>
            <div class="acciones-contacto">
              <button type="submit" id="btn-actualizar">
                <i class="fas fa-save"></i>
                <span>Actualizar Contacto</span>
              </button>

            </div>

          </div>

      </div>

      </form>
      </div>
    </section>







  </main>
  <!--Todo lo de dentro de section termina aqui en main -->
  <!-- ---------------------------------------------------------------------- -->


  <!-- ---------------------------------------------------------------------- -->
  <!------------------------------ Empieza Modal ------------------------------->
  <!-- ---------------------------------------------------------------------- -->

  <!-- ------------------------------------------------ -->
  <!--Empieza Usuario Modal-->
  <!-- ------------------------------------------------ -->


  <!-- ----------------------------------------------- -->
  <!-- Modal para editar usuario -->
  <!-- ----------------------------------------------- -->

  <div id="modalEditar" class="modal">
    <div class="modal-contenido">
      <h3>Editar Usuario</h3>
      <label>Nombre:</label>
      <input type="text" id="nombreEditar">
      <span id="errorNombre" class="error"></span>

      <label>Correo:</label>
      <input type="email" id="correoEditar">
      <span id="errorCorreo" class="error"></span>

      <label>Teléfono:</label>
      <input type="text" id="telefonoEditar">
      <span id="errorTelefono" class="error"></span>

      <label>Contraseña:</label>
      <input type="text" id="contrasenaEditar" placeholder="Contraseña" />
      <span id="errorContrasena" class="error"></span>

      <div class="modal-acciones">
        <button onclick="guardarCambios()">Guardar</button>
        <button onclick="cerrarModal()">Cancelar</button>
      </div>
    </div>
  </div>

  <!-- ----------------------------------------------- -->
  <!-- Modal de confirmación Usuario -->
  <!-- ----------------------------------------------- -->

  <div id="modalConfirmacion" class="modal-confirm">
    <div class="modal-content-confirm">
      <p id="mensajeConfirmacion">¿Estás seguro de que deseas eliminar?</p>
      <div class="botones">
        <button id="btnConfirmarEliminar" class="btn btn-confirmar">Sí, eliminar</button>
        <button id="btnCancelarEliminar" class="btn btn-cancelar">Cancelar</button>
      </div>
    </div>
  </div>

  <!-- ------------------------------------------------ -->
  <!-- Modal para agregar nuevo usuario -->
  <!-- ------------------------------------------------ -->

  <div id="modalAgregarUsuario" class="modal">
    <div class="modal-contenido">
      <h3>Agregar Usuario</h3>

      <label>Nombre:</label>
      <input type="text" id="nombreNuevo">
      <span id="errorNombreNuevo" class="error"></span>

      <label>Correo:</label>
      <input type="email" id="correoNuevo">
      <span id="errorCorreoNuevo" class="error"></span>

      <label>Teléfono:</label>
      <input type="text" id="telefonoNuevo">
      <span id="errorTelefonoNuevo" class="error"></span>

      <label>Contraseña:</label>
      <input type="text" id="contrasenaNuevo" placeholder="Contraseña" />
      <span id="errorContrasenaNuevo" class="error"></span>

      <div class="modal-acciones">
        <button class="btn-guardar" onclick="guardarNuevo()">
          <i class="fas fa-user-plus"></i> Guardar
        </button>
        <button class="btn-cancelar" onclick="cerrarModalAgregarUsuario()">Cancelar</button>
      </div>
    </div>
  </div>



  <!-- ------------------------------------------------ -->
  <!--Empieza Categoria Modal-->
  <!-- ------------------------------------------------ -->

  <!-- ------------------------------------------------ -->
  <!-- Modal Agregar Categoría -->
  <!-- ------------------------------------------------ -->

  <div id="modalAgregarCategoria" class="modal">
    <div class="modal-contenido-agregar">
      <span class="cerrar" onclick="cerrarModalAgregarCategoria()">&times;</span>
      <h3 class="h3-agregar-categoria">Agregar Categoría</h3>
      <input type="text" id="nombreCategoria" placeholder="Nombre de la categoría">
      <textarea id="descripcionCategoria" placeholder="Descripción"></textarea>
      <input type="text" id="imagenCategoria" placeholder="URL de la imagen">

      <button class="btn-agregar-categoria" onclick="guardarCategoria()">Guardar</button>
      <button class="cancelar-btn-categoria" onclick="cerrarModalAgregarCategoria()">Cancelar</button>
    </div>
  </div>

  <!-- ------------------------------------------------ -->
  <!-- Modal Editar Categoría -->
  <!-- ------------------------------------------------ -->
  <div id="modalEditarCategoria" class="modal">
    <div class="modal-contenido">
      <span class="cerrar" onclick="cerrarModalEditarCategoria()">&times;</span>
      <h3>Editar Categoría</h3>
      <input type="text" id="editarNombreCategoria">
      <textarea id="editarDescripcionCategoria"></textarea>
      <label for="editarImagenCategoria">Imagen URL:</label>
      <input type="text" id="editarImagenCategoria" />
      <div class="modal-acciones">
        <button class="btn-agregar" onclick="guardarEdicionCategoria()">Guardar Cambios</button>
        <button class="editar-btn-categoria" onclick="cerrarModalEditarCategoria()">Cancelar</button>
      </div>
    </div>
  </div>

  <!-- ------------------------------------------------ -->
  <!-- Modal Eliminar Categoría -->
  <!-- ------------------------------------------------ -->

  <div id="modalEliminarCategoria" class="modal">
    <div class="modal-contenido-categoria">
      <span class="cerrar" onclick="cerrarModalEliminarCategoria()">&times;</span>
      <h3>¿Estás seguro que deseas eliminar esta categoría?</h3>
      <button class="delete-btn-categoria" onclick="confirmarEliminarCategoria()">Sí, eliminar</button>
      <button class="cancelar-btn-categoria" onclick="cerrarModalEliminarCategoria()">Cancelar</button>
    </div>
  </div>

  <!-- ------------------------------------------------ -->
  <!--Empieza Productos Modal-->
  <!-- ------------------------------------------------ -->
  <!-- ------------------------------------------------ -->
  <!-- Modal para agregar nuevo Productos -->
  <!-- ------------------------------------------------ -->

  <!-- Modal para agregar nuevo Producto -->

  <div id="Modal-Agregar-Producto" class="modal">
    <div class="modal-contenido">
      <div class="campo-descripcion-agregar-producto">
        <h3>Agregar Producto</h3>
        <!-- Nombre -->
        <label for="nombreProducto">Nombre del Producto:</label>
        <input type="text" id="nombreProducto" placeholder="Nombre del Producto">
        <span id="errorNombreProducto" class="error"></span>
        <!-- Descripción -->
        <label for="descripcionProducto" placeholder="Descripción del producto">Descripción:</label>
        <textarea id="descripcionProducto" placeholder="Descripción del producto"></textarea>
        <span id="errorDescripcionProducto" class="error"></span>
      </div>

      <hr>

      <div class="precio-oferta-campopreciodescuento-agregar-producto">
        <!-- Precio -->
        <label for="precioProducto">Precio:</label>
        <input type="number" id="precioProducto" placeholder="Precio">
        <span id="errorPrecioProducto" class="error"></span>

        <!-- Oferta -->
        <div class="lineaOferta">
          <div class="contenedor-linea">
            <div class="checkbox-linea">
              <input type="checkbox" id="ofertaProducto">
              <label class="Oferta" for="ofertaProducto">Oferta</label>
            </div>
            <div class="descuento-opciones">
              <label for="descuentoSeleccionado">Descuento (%):</label>
              <input class="input-descuento-escribir-productos" type="number" id="descuentoSeleccionado" min="0"
                max="100" disabled>
              <span class="simbolo">%</span>
            </div>
          </div>
        </div>
        <!-- Campo de Precio Descuento -->
        <div class="campo-precio-descuento">
          <label for="precioProductoDescuento">Precio con Descuento:</label>
          <input type="number" id="precioProductoDescuento" disabled>
          <span id="errorPrecioDescuentoProducto" class="error"></span>
        </div>
      </div>

      <hr>

      <div class="formularios-carpeta-agregar-producto">
        <form method="POST" id="formulario-carpeta" action="{% url 'gestionar_carpetas' %}">
          {% csrf_token %}
          <div class="campo-formulario">
            <label for="select-carpetas">Seleccionar carpeta existente:</label>
            <select id="select-carpetas" name="carpeta" class="select-carpetas-opciones">
              {% for carpeta in carpetas %}
              <option value="{{ carpeta }}">{{ carpeta }}</option>
              {% endfor %}
            </select>
          </div>

          <div class="campo-formulario">
            <label for="nombre-carpeta">Ingrese nueva carpeta:</label>
            <input type="text" id="nombre-carpeta" name="carpeta" placeholder="Nombre de la carpeta">
            <span id="mensajeError" class="mensaje-error" style="display: none;"></span>
            <button type="submit" class="btn-guardar-carpeta">Guardar carpeta</button>
          </div>
        </form>

        <div class="campo-subir-imagen">
          <div class="div-campo-subir-imagen">
            <label for="imageInput" class="lbl-imagen-agregar-producto">Imagen del Producto:</label>
            <button type="button" id="btnSubirImagen" class="btn-agregar-subir-imagen">
              <i class="fas fa-image icono-imagen"> </i> Subir Imagen
            </button>
          </div>
          <input type="file" id="imageInput" accept="image/*" style="display: none;">
          <label id="labelMensajeImagen" class="label-estado-imagen">Estado de la imagen:</label>
          <span id="nombreArchivoImagen" class="nombre-archivo-imagen" style="display: none;"></span>

          <label for="textareaImagenes">URLs de imágenes:</label>
          <textarea id="textareaImagenes" class="textarea-imagenes" rows="4" readonly></textarea>
        </div>
      </div>

      <div class="modal-acciones">
        <button class="btn-guardar" onclick="guardarNuevoProducto()">Guardar</button>
        <button class="btn-cancelar" onclick="cerrarModalAgregarProducto()">Cancelar</button>
      </div>
    </div>
  </div>

  <!-- ------------------------------------------------ -->

  <!-- Modal para Editar Producto -->
  <div id="Modal-Editar-Producto" class="modal">
    <div class="modal-contenido">
      <div class="campo-descripcion-agregar-producto">
        <h3>Editar Producto</h3>
        <input type="hidden" id="editarProductoId">

        <!-- Nombre -->
        <label for="editarNombreProducto">Nombre del Producto:</label>
        <input type="text" id="editarNombreProducto" placeholder="Nombre del Producto">
        <span id="errorEditarNombreProducto" class="error"></span>

        <!-- Descripción -->
        <label for="editarDescripcionProducto">Descripción:</label>
        <textarea id="editarDescripcionProducto" placeholder="Descripción del producto"></textarea>
        <span id="errorEditarDescripcionProducto" class="error"></span>
      </div>

      <hr>

      <div class="precio-oferta-campopreciodescuento-agregar-producto">
        <!-- Precio -->
        <label for="editarPrecioProducto">Precio:</label>
        <input type="number" id="editarPrecioProducto" placeholder="Precio">
        <span id="errorEditarPrecioProducto" class="error"></span>

        <!-- Oferta -->
        <div class="lineaOferta">
          <div class="contenedor-linea">
            <div class="checkbox-linea">
              <input type="checkbox" id="editarOfertaProducto">
              <label class="Oferta" for="editarOfertaProducto">Oferta</label>
            </div>
            <div class="descuento-opciones">
              <label for="editarDescuentoSeleccionado">Descuento (%):</label>
              <input class="input-descuento-escribir-productos" type="number" id="editarDescuentoSeleccionado" min="0"
                max="100" disabled>
              <span class="simbolo">%</span>
            </div>
          </div>
        </div>
        <!-- Campo de Precio Descuento -->
        <div class="campo-precio-descuento">
          <label for="editarPrecioProductoDescuento">Precio con Descuento:</label>
          <input type="number" id="editarPrecioProductoDescuento" disabled>
          <span id="errorEditarPrecioDescuentoProducto" class="error"></span>
        </div>
      </div>

      <hr>

      <div class="formularios-carpeta-agregar-producto">
        <form method="POST" id="formulario-editar-carpeta">
          {% csrf_token %}
          <div class="campo-formulario">
            <label for="editarSelectCarpetas">Seleccionar carpeta existente:</label>
            <select id="editarSelectCarpetas" name="carpeta" class="select-carpetas-opciones">
              {% for carpeta in carpetas %}
              <option value="{{ carpeta }}">{{ carpeta }}</option>
              {% endfor %}
            </select>
          </div>

          <div class="campo-formulario">
            <label for="editarNombreCarpeta">Ingrese nueva carpeta:</label>
            <input type="text" id="editarNombreCarpeta" name="carpeta" placeholder="Nombre de la carpeta">
            <span id="editarMensajeError" class="mensaje-error" style="display: none;"></span>
            <button type="button" class="btn-guardar-carpeta" onclick="actualizarCarpeta()">Actualizar carpeta</button>
          </div>
        </form>

        <div class="campo-subir-imagen">
          <div class="div-campo-subir-imagen">
            <label class="lbl-imagen-agregar-producto">Imagen del Producto:</label>
            <button type="button" id="btnEditarSubirImagen" class="btn-agregar-subir-imagen">
              <i class="fas fa-image icono-imagen"> </i> Cambiar Imagen
            </button>
          </div>
          <input type="file" id="editarImageInput" accept="image/*" style="display: none;">
          <label id="editarLabelMensajeImagen" class="label-estado-imagen">Estado de la imagen:</label>
          <span id="editarNombreArchivoImagen" class="nombre-archivo-imagen" style="display: none;"></span>

          <!-- Reemplaza el textarea en tu modal con este bloque -->
          <div class="campo-imagenes">
            <label>Vista previa de imágenes:</label>
            <div id="galeria-imagenes-editar" class="galeria-imagenes"></div>
            <div class="contenedor-urls">
              <label>URLs de imágenes:</label>
              <div id="urls-imagenes-editar" class="urls-imagenes"></div>
            </div>
          </div>
        </div>
      </div>

      <div class="modal-acciones">
        <button class="btn-guardar" onclick="guardarCambiosProducto()">Guardar Cambios</button>
        <button class="btn-cancelar" onclick="cerrarModalEditarProducto()">Cancelar</button>
      </div>
    </div>
  </div>
  <!-- ------------------------------------------------ -->

  <!-- ----------------------------------------------- -->
  <!-- Modal de confirmación Producto eliminar -->
  <!-- ----------------------------------------------- -->

  <div id="modalEliminarProducto" class="modal">
    <div class="modal-contenido-producto">
      <span class="cerrar" onclick="cerrarModalEliminarProducto()">&times;</span>
      <h3>¿Estás seguro que deseas eliminar este producto?</h3>
      <button class="delete-btn-producto-Modal" onclick="eliminarProductoConfirmado()">Sí, eliminar</button>
      <button class="cancelar-btn-producto-Modal" onclick="cerrarModalEliminarProducto()">Cancelar</button>
    </div>
  </div>



  <!-- ---------------------------------------------------------------------- -->

  <!-- MODAL -->
  <div id="modal-editar" class="modal">
    <div class="modal-contenido">
      <span class="cerrar" onclick="cerrarModalEditar()">&times;</span>
      <h2>Editar Comentario y Calificación</h2>
      <form id="form-editar-comentario-stars">
        <label>Usuario:</label>
        <select id="editar-usuario" required></select>

        <label>Producto:</label>
        <select id="editar-producto" required></select>

        <label>Comentario:</label>
        <textarea id="editar-comentario" rows="4" required></textarea>

        <label>Calificación (1 a 5):</label>
        <input type="number" id="editar-calificacion" min="1" max="5" required>

        <input type="hidden" id="usuario-original">
        <input type="hidden" id="producto-original">

        <button type="submit">Guardar cambios</button>
      </form>
    </div>
  </div>

  <!-- ------------------------------------------------ -->
  <!----- Scripts ----->
  <!-- ------------------------------------------------ -->



  <script src="{% static 'js/variables.js' %}"></script>
  <script>

    /****************************************************************************/
    /************** Gestiona y Guarda en carpeta.txt las carpetas  **************/
    /****************************************************************************/

    const csrfToken = document.querySelector('[name=csrfmiddlewaretoken]').value;
    document.getElementById('formulario-carpeta').addEventListener('submit', function (event) {
      event.preventDefault();

      const nombreCarpeta = document.getElementById('nombre-carpeta').value.trim();
      const mensajeError = document.getElementById('mensajeError');

      fetch('{% url "gestionar_carpetas" %}', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'X-CSRFToken': csrfToken  // Asegúrate que tienes csrfToken definido en JS
        },
        body: JSON.stringify({ carpeta: nombreCarpeta })
      })
        .then(response => response.json().then(data => ({ ok: response.ok, data })))
        .then(({ ok, data }) => {
          if (ok && data.carpetas) {
            // Actualizar el select
            const select = document.getElementById('select-carpetas');
            select.innerHTML = '';
            data.carpetas.forEach(carpeta => {
              const option = document.createElement('option');
              option.value = carpeta;
              option.textContent = carpeta;
              select.appendChild(option);
            });

            // Ocultar mensaje de error si todo salió bien
            mensajeError.style.display = 'none';
            mensajeError.textContent = '';
          } else {
            // Mostrar mensaje de error
            mensajeError.style.display = 'block';
            mensajeError.textContent = data.error || 'Error al guardar la carpeta. Inténtalo de nuevo.';
          }
        })
        .catch(error => {
          console.error('Error de red o inesperado:', error);
          mensajeError.style.display = 'block';
          mensajeError.textContent = 'Debes de ingresar una carpeta o Inténtalo más tarde.';
        });
    });



  </script>


  <script src="{% static 'js/Admin-Productos-Table-Manita.js' %}"></script>
  <script src="{% static 'js/Admin-Menu.js' %}"></script>
  <script src="{% static 'js/Admin-Table-users.js' %}"></script>

  <script src="{% static 'js/submenu.js' %}"></script>
  <script src="{% static 'js/Admin-Productos.js' %}"></script>
  <script src="{% static 'js/Ofertas.js' %}"></script>
  <script src="{% static 'js/Admin-Productos-Ofertas.js' %}"></script>
  <script src="{% static 'js/Admin-Productos-Menu-Imagenes.js' %}"></script>

  <script src="{% static 'js/Admin-Categorias.js' %}"></script>
  <script src="{% static 'js/Admin-Home.js' %}"></script>
  <script src="{% static 'js/Admin-Comentario-Stars.js' %}"></script>
  <script src="{% static 'js/Admin-Contacto.js' %}"></script>
  <script src="{% static 'js/Admin-Usuarios-Manda.js' %}"></script>
  <script src="{% static 'js/Admin-Catalogo-link.js' %}"></script>


</body>

</html>